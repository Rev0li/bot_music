<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SongSurf Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='dashboard.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header avec stats int√©gr√©es -->
        <header style="margin-bottom: 24px;">
            <!-- Ligne 1: Titre + Status + Logs -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                <h1 style="display: flex; align-items: center; gap: 12px; margin: 0;">
                    <span style="font-size: 32px;">üéµ</span>
                    SongSurf
                </h1>
                <div style="display: flex; gap: 12px; align-items: center;">
                    <div class="status-indicator" id="server-status">
                        <span class="dot"></span>
                        <span>En ligne</span>
                    </div>
                    <button onclick="window.location.href='/logs'" style="
                        padding: 8px 16px;
                        background: var(--bg-card);
                        color: var(--text-primary);
                        border: 1px solid var(--border);
                        border-radius: 8px;
                        font-size: 13px;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.2s;
                    ">üìù Logs</button>
                </div>
            </div>
            
            <!-- Ligne 2: Statistiques compactes -->
            <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                <div class="stat-compact">
                    <div class="stat-compact-icon">üé§</div>
                    <div class="stat-compact-content">
                        <div class="stat-compact-value" id="total-artists">-</div>
                        <div class="stat-compact-label">Artistes</div>
                    </div>
                </div>
                <div class="stat-compact">
                    <div class="stat-compact-icon">üíø</div>
                    <div class="stat-compact-content">
                        <div class="stat-compact-value" id="total-albums">-</div>
                        <div class="stat-compact-label">Albums</div>
                    </div>
                </div>
                <div class="stat-compact">
                    <div class="stat-compact-icon">üéµ</div>
                    <div class="stat-compact-content">
                        <div class="stat-compact-value" id="total-songs">-</div>
                        <div class="stat-compact-label">Chansons</div>
                    </div>
                </div>
                <div class="stat-compact stat-compact-warning">
                    <div class="stat-compact-icon">‚ö†Ô∏è</div>
                    <div class="stat-compact-content">
                        <div class="stat-compact-value" id="issues-count">-</div>
                        <div class="stat-compact-label">√Ä corriger</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Music Organizer -->
        <section class="organizer-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>üéº Biblioth√®que musicale</h2>
                <div style="display: flex; gap: 12px; align-items: center;">
                    <button onclick="expandAll()" class="action-btn">üìÇ Tout ouvrir</button>
                    <button onclick="collapseAll()" class="action-btn">üìÅ Tout fermer</button>
                    <input type="text" id="search-input" placeholder="üîç Rechercher..." style="
                        padding: 8px 12px;
                        background: var(--bg-card);
                        border: 1px solid var(--border);
                        border-radius: 8px;
                        color: var(--text-primary);
                        font-size: 13px;
                        width: 200px;
                    " oninput="filterLibrary(this.value)">
                    
                    <!-- Info s√©lection et bouton -->
                    <div id="selection-info" style="
                        display: none;
                        padding: 8px 16px;
                        background: rgba(52, 199, 89, 0.1);
                        border: 1px solid #34c759;
                        border-radius: 8px;
                        font-size: 13px;
                        color: #34c759;
                        font-weight: 600;
                    ">
                        <span id="selected-count-header">0</span> s√©lectionn√©e(s)
                    </div>
                    <button id="apply-btn-header" onclick="applySuggestions()" style="
                        display: none;
                        padding: 8px 20px;
                        background: var(--accent);
                        color: white;
                        border: none;
                        border-radius: 8px;
                        font-size: 13px;
                        font-weight: 600;
                        cursor: pointer;
                        transition: all 0.2s;
                    " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                        üöÄ Appliquer
                    </button>
                </div>
            </div>
            <div id="library-tree" style="
                background: var(--bg-card);
                border: 1px solid var(--border);
                border-radius: 12px;
                padding: 12px;
                height: calc(100vh - 280px);
                min-height: 400px;
                overflow-y: auto;
                font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
                font-size: 13px;
                position: relative;
            ">
                <!-- Tree will be inserted here -->
            </div>
        </section>



        <!-- Footer -->
        <footer style="text-align: center; padding: 20px; color: var(--text-secondary); font-size: 13px;">
            <span>Derni√®re mise √† jour: <span id="last-update">-</span></span>
            <span style="margin: 0 16px;">‚Ä¢</span>
            <a href="https://www.paypal.com/donate" target="_blank" style="
                color: var(--accent);
                text-decoration: none;
                font-weight: 600;
                transition: all 0.2s;
            " onmouseover="this.style.textDecoration='underline'" onmouseout="this.style.textDecoration='none'">
                ‚ù§Ô∏è Faire un don
            </a>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='dashboard.js') }}"></script>
</body>
</html>
